function getRandomInt(e){return Math.random()*Math.floor(e)}function setSettings(){snow={speed:5e3,rate:.2},score=0,setScore(),$("#ground").height("20")}function setScore(){$("#counter").text(score)}function increaseScore(){score+=1,score%10==0&&(activateGritter(),snow.rate+=.1,snow.speed-=50),setScore()}function activateGritter(){$("#gritter").show()}function grit(){$("#gritter").hide(),$("#ground").animate({height:"-=20"},100)}function createFlake(){var e=getRandomInt(280);$('<div class="flake"></div>').appendTo("#game").css({left:e}),$(".flake").animate({top:500},snow.speed,"linear")}function generateFlakes(){getRandomInt(5)<snow.rate&&createFlake()}function startGame(){intv=window.setInterval(function(){gameLoop()},50)}function gameLoop(){generateFlakes(),checkFlakes(),checkGround()}function checkGround(){if($("#ground").height()>190){$(".flake").stop(),$("#ground").stop(),window.clearInterval(intv);$(".messageBox").prepend("<div class='message'>Due to severe weather conditions, we've had to close the school!</div>"),$(".cover").fadeIn(),$("#start").fadeIn()}}function checkFlakes(){var e=$(".flake"),t=$("#ground").offset().top;e.each(function(e){$(this).offset().top>t&&($(this).remove(),$("#ground").animate({height:"+=1"},100))})}var score,snow,intv;$(function(){$("#game").on("mouseenter touchenter",".flake",function(){$(this).remove(),increaseScore()}),$("#gritter").click(function(){grit()}),$("#start").click(function(){setSettings(),$(".cover").hide(),startGame()})});